# HotSpot虚拟机

![title](https://raw.githubusercontent.com/xinjiuyijiu/NoteImages/master/gitnote/2020/07/21/jvm_memory-1595301442533.png)

- 方法区
- 堆
- PC寄存器，又称程序计数器，记录了线程
- Java虚拟机栈
- 本地方法栈

方法去和堆被所有线程共享，堆中对象由用户手动创建，因此需要考虑内存回收的问题；而程序计数器，Java虚拟机栈，本地方法栈属于线程私有，每个线程都有自己对应的，会随着线程创建生成，随着线程的结束而消亡，因此不需要考虑内存回收的问题；


Java class文件如何被JVM执行？
HotSpot包含两种方式将字节码翻译成可执行的机器码：
- 解释执行，逐条将机器码翻译并执行
- 即时编译JIT，将一个方法中所有的字节码编译成机器码后再执行

HotSpot同时使用了这两种方式，先解释执行，遇到反复执行的热点代码，以方法为单位，进行即时编译；

***为什么使用JVM+解释执行/JIT的方式？为什么不使用机器码+编译器的方式？***

    将代码编译成class文件，具有很好的平台移植性，能够在不同平台的JVM中执行；
    JVM提供了更高维度的内存管理和GC管理，可以针对程序和平台设置对应的JVM启动参数，使得程
    序性能更高效；
    预先将class文件编译成机器码后再执行，会使得程序丢失ClassLoader动态类加载，以及JIT即
    时编译带来的代码动态优化作用...

***Smalltalk 语言，一切皆对象，那么Java中为什么还有8个基本类型？***

Java包含基本数据类型（Primitive Type）和引用类型（Reference Type），其中引用类型包括了类，接口，数组，泛型（被泛型擦除后还是前面的三种类型之一）；

## Java类加载

